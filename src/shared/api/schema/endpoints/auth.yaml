schemas:
    User:
        type: object
        required: [id, email]
        properties:
            id:
                type: string
            email:
                type: string
                format: email
            time:
                type: integer
            knowledge:
                type: integer
            rank:
                type: string
            lastActive:
                type: string
                format: date-time

    AuthResponse:
        type: object
        required:
            - accessToken
            - user
        properties:
            accessToken:
                type: string
            user:
                $ref: '#/schemas/User'

register:
    summary: Регистрация нового пользователя
    tags: [Auth]
    requestBody:
        required: true
        content:
            application/json:
                schema:
                    type: object
                    required: [email, password]
                    properties:
                        email:
                            type: string
                        password:
                            type: string
    responses:
        '201':
            description: Успешная регистрация
            content:
                application/json:
                    schema:
                        $ref: '#/schemas/AuthResponse'
        '400':
            $ref: '../shared/responses.yaml#/BadRequestError'

login:
    summary: Авторизация пользователя
    tags: [Auth]
    requestBody:
        required: true
        content:
            application/json:
                schema:
                    type: object
                    required: [email, password]
                    properties:
                        email:
                            type: string
                        password:
                            type: string
    responses:
        '200':
            description: Успешный вход
            content:
                application/json:
                    schema:
                        $ref: '#/schemas/AuthResponse'
        '401':
            $ref: '../shared/responses.yaml#/UnauthorizedError'

refresh:
    summary: Refresh access token
    parameters:
        - in: cookie
          name: refreshToken
          schema:
              type: string
    responses:
        '200':
            description: Access token refreshed successfully
            content:
                application/json:
                    schema:
                        $ref: '#/schemas/AuthResponse'
        '401':
            $ref: '../shared/responses.yaml#/UnauthorizedError'
